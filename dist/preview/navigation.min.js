"use strict";var __awaiter=this&&this.__awaiter||function(s,t,n,i){function o(e){return e instanceof n?e:new n(function(l){l(e)})}return new(n||(n=Promise))(function(e,l){function r(c){try{a(i.next(c))}catch(d){l(d)}}function u(c){try{a(i.throw(c))}catch(d){l(d)}}function a(c){c.done?e(c.value):o(c.value).then(r,u)}a((i=i.apply(s,t||[])).next())})},__generator=this&&this.__generator||function(s,t){var n={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},i,o,e,l;return l={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function r(a){return function(c){return u([a,c])}}function u(a){if(i)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(n=0)),n;)try{if(i=1,o&&(e=a[0]&2?o.return:a[0]?o.throw||((e=o.return)&&e.call(o),0):o.next)&&!(e=e.call(o,a[1])).done)return e;switch(o=0,e&&(a=[a[0]&2,e.value]),a[0]){case 0:case 1:e=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,o=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(e=n.trys,!(e=e.length>0&&e[e.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){n.label=a[1];break}if(a[0]===6&&n.label<e[1]){n.label=e[1],e=a;break}if(e&&n.label<e[2]){n.label=e[2],n.ops.push(a);break}e[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(s,n)}catch(c){a=[6,c],o=0}finally{i=e=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Navigation=function(){function s(){var t=this;this._scrollHeight=0,this._megaMenuContainerDistanceFromViewportTop=0,this._startX=0,this._startY=0,this._menuShouldOpenOnHover=!0,this._navHasMegaMenu=!1,this._submenus=[],this._openMenu=null,this._headerScrolls=!1,this._initializeSticky=function(){t._nav.setAttribute("data-sticky-offset","".concat(t._header.offsetHeight))},this._handleScroll=function(){var n=t._nav.getAttribute("data-sticky-offset");typeof n=="string"&&(n=parseInt(n)),window.innerWidth<=991&&(window.pageYOffset>n?t._enableSticky():t._disableSticky())},this._handleResize=function(){t._initializeSticky(),window.innerWidth>=992||window.pageYOffset===0?t._disableSticky():t._enableSticky()},this._enableSticky=function(){t._headerWrapper.style.marginBottom=t._navHeader.offsetHeight+"px",t._body.classList.add("sticky-is-enabled")},this._disableSticky=function(){t._headerWrapper.style.marginBottom="0",t._body.classList.remove("sticky-is-enabled")},this._enableHover=function(){t._hoverItems.forEach(function(n){var i=n.querySelector("a.navlink");i&&(i.addEventListener("mouseover",t._hoverOpen),i.addEventListener("mouseout",t._hoverClose))})},this._disableHover=function(){t._hoverItems.forEach(function(n){var i=n.querySelector("a.navlink");i&&(i.removeEventListener("mouseover",t._hoverOpen),i.removeEventListener("mouseout",t._hoverClose),n.classList.remove("open"))})},this._enableMobile=function(){document.querySelectorAll(".navbar-nav .hideOnMobile").forEach(function(n){return n.remove()}),t._disableHover(),t._horizontalNav.setAttribute("aria-hidden","true"),s.removeChildrenFromTabOrder(t._horizontalNav)},this._enableDesktop=function(){document.querySelectorAll(".navbar-nav .hideOnDesktop").forEach(function(n){return n.remove()}),t._menuShouldOpenOnHover?t._enableHover():t._disableHover()},this._captureSwipe=function(n){var i=n.changedTouches[0];t._startX=i.pageX,t._startY=i.pageY},this._evaluateSwipe=function(n){var i=n.changedTouches[0],o=i.pageX-t._startX,e=i.pageY-t._startY;o>=s.threshold&&Math.abs(e)<s.threshold/2&&(t._closeSidebar(),n.preventDefault())},this._openSidebar=function(){t._scrollHeight=window.pageYOffset,t._body.style.top=-t._scrollHeight+"px",t._body.setAttribute("data-scroll","".concat(t._scrollHeight)),t._body.classList.add("sidebar-is-open"),t._wrapper.insertBefore(t._backdrop,t._wrapper.childNodes[0]),document.addEventListener("keydown",t._handleEsc),t._backdrop.classList.add("in"),t._backdrop.classList.remove("invisible"),s.reAddChildrenToTabOrder(t._verticalNav),t._verticalNav.removeAttribute("aria-hidden")},this._closeSidebar=function(){t._body.classList.remove("sidebar-is-open"),t._backdrop.classList.remove("in"),document.querySelectorAll("#vertical-navbar-collapse .navbar-nav .mega-menu-container").forEach(function(n){n.parentElement.children[0].classList.contains("active")||n.classList.remove("open")}),setTimeout(function(){t._backdrop.classList.add("invisible"),t._backdrop.remove()},250),window.scrollTo({top:t._scrollHeight}),t._verticalNav.setAttribute("aria-hidden","true"),s.removeChildrenFromTabOrder(t._verticalNav)},this._hoverOpen=function(n){var i;(i=n.currentTarget)===null||i===void 0||i.parentElement.classList.add("open")},this._hoverClose=function(n){var i,o;(o=(i=n.currentTarget)===null||i===void 0?void 0:i.parentElement)===null||o===void 0||o.classList.remove("open")},this._handleEsc=function(n){n.key==="Escape"&&t._closeSidebar()},this._handleMenuOpen=function(n){var i,o,e,l,r=(i=t._openMenu)===null||i===void 0?void 0:i._menu.parentElement.classList.contains("mega-menu-container__nav-list"),u=r&&((o=t._openMenu)===null||o===void 0?void 0:o._megaMenuContainer.classList.contains("open")),a=!r&&((e=t._openMenu)===null||e===void 0?void 0:e._menu.parentElement.classList.contains("open"));(u||a)&&((l=t._openMenu)===null||l===void 0||l.closeSubmenu(!0,!1)),t._openMenu=n},this.initialize()}return s.prototype.initialize=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._initializeNavComponentVariables()];case 1:return t.sent(),this._initializeSticky(),this._enableMenuForDeviceType(),this._initializeSubmenus(),this._navHasMegaMenu?[4,this._initializeMegaMenuStyling()]:[3,3];case 2:t.sent(),this._headerScrolls?this._makeMegaMenuScrollWithHeader():this._makeMegaMenuFixedWithHeader(),t.label=3;case 3:return this._addEventListeners(),[2]}})})},s.prototype.doBeforeNextRepaint=function(t){return new Promise(function(n){requestAnimationFrame(function(){t(),n()})})},s.prototype._initializeNavComponentVariables=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(n){switch(n.label){case 0:return this._body=document.body,this._wrapper=document.getElementById("content"),this._header=document.querySelector("header"),this._nav=document.getElementById("nav"),this._offCanvasNav=document.getElementById("nav-sidebar"),this._headerWrapper=document.querySelector(".headerWrapper"),this._navHeader=document.getElementById("navbar-header"),this._hoverItems=this._nav.querySelectorAll(".dropdown"),this._navToggle=document.getElementById("open-right"),this._horizontalNav=document.getElementById("horizontal-navbar-collapse"),this._verticalNav=document.getElementById("vertical-navbar-collapse"),this._collapseItems=this._nav.querySelectorAll(".dropdown-has-children"),this._sidebarCloseBtn=this._offCanvasNav.querySelector(".navbar-close-button"),this._menuShouldOpenOnHover=this._nav.getAttribute("data-open-menu-on-hover")==="True",[4,this.doBeforeNextRepaint(function(){t._megaMenuContainerDistanceFromViewportTop=t._headerWrapper.getBoundingClientRect().bottom})];case 1:return n.sent(),this._backdrop=document.createElement("div"),this._backdrop.id="navbar-backdrop",this._backdrop.className="fade invisible",this._navHasMegaMenu=this._nav.classList.contains("mega-menu-nav"),[4,this.doBeforeNextRepaint(function(){t._headerScrolls=getComputedStyle(t._headerWrapper).position!=="fixed"})];case 2:return n.sent(),[2]}})})},s.prototype._enableMenuForDeviceType=function(){window.matchMedia("(max-width: 991px)").matches?this._enableMobile():this._enableDesktop()},s.prototype._makeMegaMenuScrollWithHeader=function(){var t=document.querySelectorAll(".full.mega-menu-nav .mega-menu-container--fixed");t.forEach(function(n){n.classList.remove("mega-menu-container--fixed")})},s.prototype._makeMegaMenuFixedWithHeader=function(){var t=this,n=document.querySelectorAll(".full.mega-menu-nav .mega-menu-container--fixed");n.forEach(function(i){i.style.top="".concat(t._megaMenuContainerDistanceFromViewportTop,"px")})},s.prototype._menuScrollingObserver=function(t){var n=this,i=new IntersectionObserver(function(o){var e;o[0].intersectionRatio===0&&((e=n._openMenu)===null||e===void 0||e.closeSubmenu(!1,!1))});i.observe(t)},s.prototype._initializeSubmenus=function(){var t=this;this._collapseItems.forEach(function(n){var i=n.firstElementChild;if(i){var o=i.dataset.menuName,e=document.querySelector('.mega-menu-container--desktop[data-menu-name="'.concat(o,'"]'));t._menuScrollingObserver(n),t._submenus.push(new Submenu(i,t._menuShouldOpenOnHover,e,t._handleMenuOpen))}})},s.prototype._addEventListeners=function(){this._verticalNav.addEventListener("touchstart",this._captureSwipe,{passive:!0}),this._verticalNav.addEventListener("touchmove",this._evaluateSwipe,{passive:!0}),this._navToggle.addEventListener("click",this._openSidebar),this._backdrop.addEventListener("click",this._closeSidebar),this._backdrop.addEventListener("touchstart",this._captureSwipe,{passive:!0}),this._backdrop.addEventListener("touchmove",this._evaluateSwipe,{passive:!0}),this._sidebarCloseBtn.addEventListener("click",this._closeSidebar),this._sidebarCloseBtn.addEventListener("touchend",this._closeSidebar,{passive:!0}),window.addEventListener("scroll",this._handleScroll),window.addEventListener("resize",this._handleResize),$(".nav-sidebar .dropdown-menu").on("show.bs.collapse",function(){var t,n,i=this.parentElement.parentElement,o=i.classList.contains("mega-menu-container");o?(i.classList.toggle("open"),(t=i.previousElementSibling)===null||t===void 0||t.classList.add("active")):(n=this.previousElementSibling)===null||n===void 0||n.classList.add("active")}),$(".nav-sidebar .dropdown-menu").on("hide.bs.collapse",function(){var t,n,i=this.parentElement.parentElement,o=i.classList.contains("mega-menu-container");o?(i.classList.toggle("open"),(t=i.previousElementSibling)===null||t===void 0||t.classList.remove("active")):(n=this.previousElementSibling)===null||n===void 0||n.classList.remove("active")})},s.prototype._initializeMegaMenuStyling=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._styleMegaMenuBackgroundColorVariable()];case 1:return t.sent(),this._styleMegaMenuMaxHeight(),[2]}})})},s.prototype._styleMegaMenuBackgroundColorVariable=function(){return __awaiter(this,void 0,void 0,function(){var t,n,i;return __generator(this,function(o){switch(o.label){case 0:return t=null,n=document.querySelectorAll(".full.mega-menu-nav .dropdown-has-children"),i=Array.from(n).find(function(e){return t=e.querySelector(".dropdown-menu"),t!==null}),i?[4,this.doBeforeNextRepaint(function(){i.classList.add("open"),t.style.height="0px";var e="";e=getComputedStyle(i.querySelector("a")).backgroundColor;var l=document.documentElement;l.style.setProperty("--submenu-text-background-color",e),i.classList.remove("open"),t.style.height="unset"})]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},s.prototype._styleMegaMenuMaxHeight=function(){var t=this,n=this._megaMenuContainerDistanceFromViewportTop,i="calc(98vh - ".concat(n,"px)"),o=document.querySelectorAll(".full.mega-menu-nav .mega-menu-container--desktop");o.forEach(function(e){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(l){switch(l.label){case 0:return[4,this.doBeforeNextRepaint(function(){e.style.maxHeight=i,e.style.opacity="0",e.classList.add("open");var r=e.querySelector(".mega-menu-container__content"),u=r.children[1],a="";a=getComputedStyle(u).height,e.style.height=a,e.classList.remove("open"),e.style.opacity="1"})];case 1:return l.sent(),[2]}})})})},s.removeChildrenFromTabOrder=function(t){var n=t.querySelectorAll("a button");n.forEach(function(i){return i.setAttribute("tabindex","-1")})},s.reAddChildrenToTabOrder=function(t){var n=t.querySelectorAll("[tabindex='-1']");n.forEach(function(i){return i.removeAttribute("tabindex")})},s.toggleExpanded=function(t){t.getAttribute("aria-expanded")==="true"?t.setAttribute("aria-expanded","false"):t.setAttribute("aria-expanded","true")},s.threshold=50,s}(),Submenu=function(){function s(t,n,i,o){var e=this;this.handleMenuOpen=o,this._megaMenuContainer=null,this._activeIndex=0,this._firstLetters=[],this._isHovering=!1,this._openedByClick=!1,this._addEventListeners=function(){var r;e._trigger.addEventListener("click",e._handleTriggerClick),e._trigger.addEventListener("keydown",function(u){(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),e._trigger.click())}),e._menu.addEventListener("keydown",e._handleMenuNavigation),(r=e._megaMenuLinkItems)===null||r===void 0||r.forEach(function(u){u.addEventListener("keydown",function(a){(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),u.click())})}),e._menuShouldOpenOnHover&&e._addOpenOnHoverEventListeners(),e._submenuHasMegaMenu&&e._addMegaMenuCloseBtnListeners()},this._handleTriggerClick=function(r){e._isHovering||(e._openedByClick?e.closeSubmenu(!1,!0):(e._openedByClick=!0,e._openSubmenu(!0)))},this._handleHoverOver=function(){e._openedByClick||(e._isHovering=!0,e._openSubmenu(!1))},this._handleHoverOut=function(){e.closeSubmenu(!1)},this._openSubmenu=function(r){r||e._trigger.parentElement.classList.add("open"),e._trigger.setAttribute("aria-expanded","true"),r&&(e.handleMenuOpen(e),e._submenuHasMegaMenu&&e._openMegaMenu(),e._focusFirstItem()),document.addEventListener("keydown",e._handleEscape)},this.closeSubmenu=function(r,u){r===void 0&&(r=!0),u===void 0&&(u=!1),e._trigger.setAttribute("aria-expanded","false"),u||e._trigger.parentElement.classList.remove("open"),e._submenuHasMegaMenu&&e._closeMegaMenu(),e._isHovering=!1,e._openedByClick=!1,r&&e._trigger.focus(),document.removeEventListener("keydown",e._handleEscape)},this._handleEscape=function(r){r.key==="Escape"&&(r.preventDefault(),e.closeSubmenu())},this._handleMenuNavigation=function(r){var u;if(r.key!=="Enter"){if(r.key===" "){(u=document.activeElement)===null||u===void 0||u.click();return}if(r.key.length===1){e._focusNextByFirstLetter(r.key.toLowerCase());return}if(s.NavigationKeys.includes(r.key))switch(r.preventDefault(),r.stopImmediatePropagation(),r.key){case"Home":e._focusFirstItem();break;case"End":e._focusLastItem();break;case"ArrowLeft":case"ArrowUp":e._activeIndex===0?e._focusLastItem():e._focusPrevItem();break;case"ArrowRight":case"ArrowDown":e._activeIndex===e._menuItems.length-1?e._focusFirstItem(0):e._focusNextItem()}}},this._focusFirstItem=function(r){r===void 0&&(r=250),setTimeout(function(){e._menuItems[0].focus(),e._activeIndex=0},r)},this._focusLastItem=function(){var r=e._menuItems.length-1;e._menuItems[r].focus(),e._activeIndex=r},this._focusPrevItem=function(){var r=e._activeIndex-1;e._menuItems[r].focus(),e._activeIndex=r},this._focusNextItem=function(){var r=e._activeIndex+1;e._menuItems[r].focus(),e._activeIndex=r},this._focusNextByFirstLetter=function(r){var u=e._firstLetters.indexOf(r,e._activeIndex+1);u===-1&&(u=e._firstLetters.indexOf(r)),u>-1&&(e._menuItems[u].focus(),e._activeIndex=u)};var l=null;if(this._megaMenuContainer=i,this._trigger=t,this._menuShouldOpenOnHover=n,this._submenuHasMegaMenu?(l=i.querySelector(".dropdown-mega-menu"),this._megaMenuLinkItems=i.querySelectorAll("a"),this._addMegaMenuListeners()):l=t.parentElement.querySelector(".dropdown-menu"),!l){console.error("Menu button ".concat(t.id," is marked up as if it has a sub menu but does not."));return}this._menu=l,this._menuItems=l.querySelectorAll("[role='menuitem']"),this._menuItems.forEach(function(r){e._firstLetters.push(r.textContent.trim().substring(0,1).toLowerCase())}),this._addEventListeners()}return Object.defineProperty(s.prototype,"_submenuHasMegaMenu",{get:function(){return this._megaMenuContainer!==null},enumerable:!1,configurable:!0}),s.prototype._addOpenOnHoverEventListeners=function(){this._trigger.addEventListener("mouseover",this._handleHoverOver),this._trigger.addEventListener("mouseout",this._handleHoverOut),this._menu.addEventListener("mouseover",this._handleHoverOver),this._menu.addEventListener("mouseout",this._handleHoverOut)},s.prototype._addMegaMenuCloseBtnListeners=function(){var t=this,n=this._megaMenuContainer.querySelector(".mega-menu-container__close");n.addEventListener("click",function(e){t.closeSubmenu()}),n.addEventListener("keydown",function(e){e.key==="Tab"&&e.shiftKey&&(e.preventDefault(),t._focusLastItem())});var i={attributes:!0,childList:!0,subtree:!0},o=new MutationObserver(function(){setTimeout(function(){t._trigger.parentElement.classList.contains("open")?t._openMegaMenu():t._closeMegaMenu()},100)});o.observe(this._trigger.parentElement,i)},s.prototype._addMegaMenuListeners=function(){var t=this;this._megaMenuContainer.addEventListener("keydown",function(n){n.target===t._megaMenuContainer&&n.key==="Tab"&&n.shiftKey&&t._trigger.parentElement.nextElementSibling.firstElementChild.focus()})},s.prototype._openMegaMenu=function(){this._megaMenuContainer.classList.add("open")},s.prototype._closeMegaMenu=function(){var t;(t=this._megaMenuContainer)===null||t===void 0||t.classList.remove("open")},s.NavigationKeys=["End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"],s}();DoUtility.SelfInstantiateOnLoad(Navigation);
