"use strict";var BannerManager=function(){function r(e){this._bannerCarousel=e,this.initialize()}return r.prototype.initialize=function(){this._bannerThreshold=50,this._ariaSlideChangeReader=this._bannerCarousel.querySelector('[id^="slideChangeReader-"]'),this.showOnlyLiveBanners(),this.addTouchStartEventListener(),this.addTouchMoveEventListener(),this.addDisclaimerEventListeners(),this.addChangeSlideEventListeners(),this.addKeyboardEventListeners(this._bannerCarousel);var e=this._bannerCarousel.querySelector('[id^="hiddenPlayPauseControl-"]');this.addPlayPauseBannerCarouselEvent(e);var a=this._bannerCarousel.querySelector('[id^="playPauseControl-"]');a?this.addPlayPauseBannerCarouselEvent(a):this.addBannerCarouselEvent()},r.prototype.addKeyboardEventListeners=function(e){var a=e.querySelectorAll(".slideIndicator");a.forEach(function(n){$(n).on("keypress",function(i){i.key=="Enter"&&$(e).carousel($(this).data("slide-to"))})});var t=e.querySelectorAll(".carousel-control-button");t.forEach(function(n){$(n).on("keypress",function(i){i.key=="Enter"&&$(e).carousel($(this).data("slide"))})})},r.prototype.announceSlideChange=function(){var e=this;setTimeout(function(){var a=e.getActiveSlide(),t=e.slideHasDisclaimerButton(a);e._ariaSlideChangeReader.innerHTML="Carousel slide has changed. ".concat(t?"Slide has disclaimer button.":""),setTimeout(function(){e._ariaSlideChangeReader.innerHTML=""},1e3)},1e3)},r.prototype.getActiveSlide=function(){return this._bannerCarousel.querySelector(".carousel-inner .banner-slide.active")},r.prototype.slideHasDisclaimerButton=function(e){return e.querySelector(".banner-disclaimer-btn")!==null},r.prototype.addChangeSlideEventListeners=function(){var e=this,a=this._bannerCarousel.querySelectorAll(".carousel-control"),t=this._bannerCarousel.querySelectorAll(".slideIndicator"),n=this._bannerCarousel.querySelectorAll(".carousel-control-button:not(.play-pause)");a.forEach(function(i){i.addEventListener("click",function(o){e.announceSlideChange()})}),t.forEach(function(i){i.addEventListener("click",function(o){e.announceSlideChange()})}),n.forEach(function(i){i.addEventListener("click",function(o){e.announceSlideChange()})})},r.prototype.addTouchStartEventListener=function(){var e=this;this._bannerCarousel.addEventListener("touchstart",function(a){var t=a.changedTouches[0];e._bannerDistX=0,e._bannerDistY=0,e._bannerStartX=t.pageX,e._bannerStartY=t.pageY,e._touchStartedForward=!1,e._touchStartedBackward=!1},{passive:!0})},r.prototype.addTouchMoveEventListener=function(){var e=this;this._bannerCarousel.addEventListener("touchmove",function(a){var t=a.changedTouches[0];e._bannerDistX=t.pageX-e._bannerStartX,e._bannerDistY=t.pageY-e._bannerStartY;var n=e._bannerCarousel.querySelector(".carousel-inner .active .img-responsive");e._bannerDistX>=e._bannerThreshold&&Math.abs(e._bannerDistY)<e._bannerThreshold&&!e._touchStartedBackward?(n&&window.TrackBannerClick(jQuery(n).data("assetid"),jQuery(n).data("assetname")),$(e._bannerCarousel).carousel("prev"),e._touchStartedBackward=!0,e._touchStartedForward=!1,a.preventDefault()):e._bannerDistX<=e._bannerThreshold*-1&&Math.abs(e._bannerDistY)<e._bannerThreshold&&!e._touchStartedForward&&(n&&window.TrackBannerClick(jQuery(n).data("assetid"),jQuery(n).data("assetname")),$(e._bannerCarousel).carousel("next"),e._touchStartedForward=!0,e._touchStartedBackward=!1,a.preventDefault())},{passive:!0})},r.prototype.addDisclaimerEventListeners=function(){var e=this,a=this._bannerCarousel.querySelectorAll(".open-disclaimer"),t=this._bannerCarousel.previousElementSibling;a?.forEach(function(n){n.addEventListener("click",function(i){t.innerHTML=n.dataset.content,t.classList.add("open"),t.removeAttribute("hidden"),$(e._bannerCarousel).carousel("pause"),e._bannerCarousel.setAttribute("aria-hidden","true"),e.updateDisclaimerStyling(),t.focus(),e.addDisclaimerCloseEventListener(t)})})},r.prototype.addDisclaimerCloseEventListener=function(e){var a=this,t=e.querySelector(".title-container__close-btn"),n=t||document;n.addEventListener("click",function(i){if(!i.target.classList.contains("open-disclaimer")||i.target.classList.contains("close-disclaimer")&&e.classList.contains("open")){var o=a.getActiveSlide();e.innerHTML="",e.classList.remove("open"),e.setAttribute("hidden","true"),a._bannerCarousel.setAttribute("aria-hidden","false"),o.focus()}})},r.prototype.addPlayPauseBannerCarouselEvent=function(e){var a=this;e?.addEventListener("click",function(t){a.togglePlayPauseIcon(),a.togglePlayPauseBehavior(e)})},r.prototype.togglePlayPauseIcon=function(){var e=this._bannerCarousel.querySelector(".carousel-inner .active .img-responsive");e&&window.TrackBannerClick(jQuery(e).data("assetid"),jQuery(e).data("assetname"));var a=this._bannerCarousel.querySelector('[id^="playPauseControl-"] > i');a.classList.contains("fa-pause")?(a.classList.remove("fa-pause"),a.classList.add("fa-play")):(a.classList.remove("fa-play"),a.classList.add("fa-pause"))},r.prototype.togglePlayPauseBehavior=function(e){var a=e.classList.contains("isPlaying"),t=e.classList.contains("isPaused"),n="Play slide rotation.",i="Pause slide rotation.";t?(e.classList.remove("isPaused"),e.classList.add("isPlaying"),$(this._bannerCarousel).carousel("cycle"),$(e).attr("aria-label",i)):a&&(e.classList.remove("isPlaying"),e.classList.add("isPaused"),$(this._bannerCarousel).carousel("pause"),$(e).attr("aria-label",n))},r.prototype.addBannerCarouselEvent=function(){var e,a=this._bannerCarousel.dataset.interval,t=a?parseInt(a):5e3;$(this._bannerCarousel).carousel({interval:t}),this._bannerCarousel.addEventListener("slid.bs.carousel",function(){var n=$(".active img").attr("data-imprcode"),i=$(".active img").attr("data-imprevent");n&&window.trackerHook({trackId:n,actionType:"impression",trackerEvents:i})}),(e=document.querySelectorAll("[data-toggle='popover']"))===null||e===void 0||e.forEach(function(n){$(n).popover()})},r.prototype.showOnlyLiveBanners=function(){var e=this,a=this._bannerCarousel.querySelectorAll(".banner-slide"),t=this._bannerCarousel.querySelectorAll(".slideIndicator");a.forEach(function(i,o){var l,c,s=i.getElementsByTagName("img").item(0),v=i.classList.contains("active"),d=s.dataset.assetStart?new Date(s.dataset.assetStart):null,u=s.dataset.assetExpire?new Date(s.dataset.assetExpire):null;d&&d>=new Date||u&&u<new Date?(i.remove(),t!=null&&((l=t[t.length-1])===null||l===void 0||l.remove()),v&&((c=a[o+1])===null||c===void 0||c.classList.add("active"))):e.addBannerClickTagging(s,o+1,s.dataset.assetname?s.dataset.assetname:s.alt)});var n=document.querySelector("section.hidden");n&&n.classList.remove("hidden")},r.prototype.addBannerClickTagging=function(e,a,t){e.getAttribute("is-subaru-corporate-cell")===null&&e.addEventListener("click",function(){window.TrackBannerClick(a,t)})},r.prototype.updateDisclaimerStyling=function(){var e=document.querySelector(".banner-disclaimer-content__text--disclosure");if(e){var a=e.scrollHeight>e.clientHeight;if(a){var t=document.querySelector(".banner-disclaimer-content--disclosure");t.style.width="95%"}}},r}();if(document.readyState==="loading")window.addEventListener("DOMContentLoaded",function(){var r=document.querySelectorAll('[id^="carousel-"]');r.forEach(function(e){new BannerManager(e)})});else{var bannerCarousels=document.querySelectorAll('[id^="carousel-"]');bannerCarousels.forEach(function(r){new BannerManager(r)})}
